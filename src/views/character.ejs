<!doctype html>
<html lang="en">

<%- include('global/header', {names: names}) %>


<!-- <%console.log("character.ejs called")%> -->

<head>
  <meta charset="utf-8" />
  <title><%=name%></title>
  <meta name="author" content="You">
  <meta name="description" content="A compendium of Harry Potter characters">
  <meta content="text/html" http-equiv="Content-type" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/d3@5.12.0/dist/d3.min.js"></script>
  <link href="https://unpkg.com/c3@0.7.11/c3.min.css" rel="stylesheet">
  <script src="https://unpkg.com/c3@0.7.11/c3.min.js"></script>

</head>

<body>
  <header>
    <h1><%=name%></h1>
  </header>
  <section id="county-stats">
    <h2>Crime statistics in <%=name%> county</h2>
    <table>
      <thead>
        <th> Year </th>
        <th> Index Total </th>
        <th> Violent Total </th>
        <th> Murder </th>
        <th> Rape </th>
        <th> Robbery </th>
        <th> Aggravated Assault </th>
        <th> Property Total </th>
        <th> Burglary </th>
        <th> Larceny </th>
        <th> Motor Vehicle Theft </th>
      </thead>
      <tbody>
        <% for(let i = 2017; i < 2022; i++) {%>
        <tr>
          <td><%=i%></td>
          <td><%= stats[i]["indexTotal"]%></td>
          <td><%= stats[i]["violentTotal"] %></td>
          <td><%= stats[i]["murder"] %></td>
          <td><%= stats[i]["rape"] %></td>
          <td><%= stats[i]["robbery"] %></td>
          <td><%= stats[i]["aggravatedAssault"] %></td>
          <td><%= stats[i]["propertyTotal"] %></td>
          <td><%= stats[i]["burglary"] %></td>
          <td><%= stats[i]["larceny"] %></td>
          <td><%= stats[i]["motorVehicleTheft"] %></td>
        </tr>
        <%} %>
      </tbody>
    </table>
  </section>

  <section>
    <div id="chart"></div>
    <script>
      var chart = c3.generate({
        bindto: '#chart',
        data: {
          x: 'x',
          columns: [
            ['x', 2017, 2018, 2019, 2020, 2021],
            ["Violent Total", stats[2017]["violentTotal"], stats[2018]["violentTotal"], stats[2019]["violentTotal"], stats[2020]["violentTotal"], stats[2021]["violentTotal"]]
            // figure out how to get stats in, might not be passing anything in
            // ["Murder", ]
            // ["Rape", ]
            // ["Robbery", ]
            // ["Aggravated Assault", ]
            // ["Property Total", ]
            // ["Burglary", ]
            // ["Larceny", ]
            // ["Motor Vehicle Theft", ]
          ]
        },
        axis: {
          x: {
            label: {
              text: 'Year',
              position: 'middle'
            }
          },
          y: {
            show: true,
            label: {
              text: 'Frequency',
              position: 'outer-middle'
            }
          }
        }
      });
    </script>
  </section>

  <%- include ('global/footer');  %>

</body>

</html>
